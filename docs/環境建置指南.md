# ğŸš€ LineBot-Web ç’°å¢ƒå»ºç½®æŒ‡å—

## ğŸ“‹ ç›®éŒ„
- [ç³»çµ±éœ€æ±‚](#ç³»çµ±éœ€æ±‚)
- [å¿«é€Ÿé–‹å§‹](#å¿«é€Ÿé–‹å§‹)
- [è©³ç´°è¨­ç½®æ­¥é©Ÿ](#è©³ç´°è¨­ç½®æ­¥é©Ÿ)
- [è³‡æ–™åº«è¨­ç½®](#è³‡æ–™åº«è¨­ç½®)
- [ç’°å¢ƒè®Šæ•¸é…ç½®](#ç’°å¢ƒè®Šæ•¸é…ç½®)
- [é©—è­‰èˆ‡æ¸¬è©¦](#é©—è­‰èˆ‡æ¸¬è©¦)
- [é€²éšé…ç½®](#é€²éšé…ç½®)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)

---

## ğŸ”§ ç³»çµ±éœ€æ±‚

### ç¡¬é«”éœ€æ±‚
- **RAM**: 8GB æˆ–ä»¥ä¸Š
- **å„²å­˜ç©ºé–“**: è‡³å°‘ 5GB å¯ç”¨ç©ºé–“
- **ç¶²è·¯**: ç©©å®šçš„ç¶²è·¯é€£ç·šï¼ˆç”¨æ–¼å¥—ä»¶ä¸‹è¼‰ï¼‰

### è»Ÿé«”éœ€æ±‚
| å·¥å…· | ç‰ˆæœ¬ | å¿…è¦æ€§ | ä¸‹è¼‰é€£çµ |
|------|------|--------|----------|
| Python | 3.11+ | å¿…è¦ | [python.org](https://www.python.org/downloads/) |
| Node.js | 18+ | å¿…è¦ | [nodejs.org](https://nodejs.org/) |
| Git | æœ€æ–°ç‰ˆ | å¿…è¦ | [git-scm.com](https://git-scm.com/) |
| Docker | æœ€æ–°ç‰ˆ | å¯é¸ | [docker.com](https://www.docker.com/) |

### æ¨è–¦é–‹ç™¼å·¥å…·
- **IDE**: Visual Studio Code
- **API æ¸¬è©¦**: Postman æˆ– Insomnia
- **è³‡æ–™åº«ç®¡ç†**: pgAdmin æˆ– DBeaver
- **ç‰ˆæœ¬æ§åˆ¶**: Git GUI å·¥å…·

---

## âš¡ å¿«é€Ÿé–‹å§‹

### ğŸ¯ 5åˆ†é˜å¿«é€Ÿå•Ÿå‹•

```bash
# 1. å…‹éš†å°ˆæ¡ˆ
git clone <your-repository-url>
cd linebot-web

# 2. å¾Œç«¯è¨­ç½®
cd Backend-v1
python -m venv venv
# Windows
venv\Scripts\activate
# Linux/Mac
source venv/bin/activate

pip install -r requirements.txt
cp env.example .env

# 3. å‰ç«¯è¨­ç½®
cd ../frontend
npm install
cp env.example .env.local

# 4. å•Ÿå‹•æœå‹™
# çµ‚ç«¯æ©Ÿ 1: å¾Œç«¯
cd Backend-v1
python start.py

# çµ‚ç«¯æ©Ÿ 2: å‰ç«¯
cd frontend
npm run dev
```

### âœ… å¿«é€Ÿé©—è­‰æ¸…å–®
- [ ] å¾Œç«¯æœå‹™é‹è¡Œåœ¨ `http://localhost:8000`
- [ ] å‰ç«¯æœå‹™é‹è¡Œåœ¨ `http://localhost:8080`
- [ ] å¯ä»¥è¨ªå• API æ–‡æª”: `http://localhost:8000/docs`
- [ ] å‰ç«¯é é¢æ­£å¸¸è¼‰å…¥

---

## ğŸ“š è©³ç´°è¨­ç½®æ­¥é©Ÿ

### ğŸ å¾Œç«¯è¨­ç½®

#### 1. Python ç’°å¢ƒè¨­ç½®
```bash
# æª¢æŸ¥ Python ç‰ˆæœ¬
python --version  # æ‡‰è©²æ˜¯ 3.11+

# å‰µå»ºè™›æ“¬ç’°å¢ƒ
cd Backend-v1
python -m venv venv

# å•Ÿå‹•è™›æ“¬ç’°å¢ƒ
# Windows
venv\Scripts\activate
# Linux/Mac
source venv/bin/activate

# é©—è­‰è™›æ“¬ç’°å¢ƒ
which python  # æ‡‰è©²æŒ‡å‘ venv ä¸­çš„ python
```

#### 2. å®‰è£ä¾è³´
```bash
# å®‰è£ Python å¥—ä»¶
pip install -r requirements.txt

# é©—è­‰å®‰è£
pip list
```

#### 3. ç’°å¢ƒè®Šæ•¸é…ç½®
```bash
# è¤‡è£½ç’°å¢ƒè®Šæ•¸æ¨¡æ¿
cp env.example .env

# ç·¨è¼¯ .env æ–‡ä»¶
# ä½¿ç”¨ä½ å–œæ­¡çš„ç·¨è¼¯å™¨ï¼Œä¾‹å¦‚ï¼š
code .env  # VS Code
nano .env  # Linux/Mac çµ‚ç«¯æ©Ÿ
```

#### 4. å•Ÿå‹•å¾Œç«¯æœå‹™
```bash
# æ–¹å¼ 1: ä½¿ç”¨å•Ÿå‹•è…³æœ¬
python start.py

# æ–¹å¼ 2: ç›´æ¥ä½¿ç”¨ uvicorn
uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
```

### ğŸŒ å‰ç«¯è¨­ç½®

#### 1. Node.js ç’°å¢ƒè¨­ç½®
```bash
# æª¢æŸ¥ Node.js ç‰ˆæœ¬
node --version  # æ‡‰è©²æ˜¯ 18+
npm --version

# å¦‚æœä½¿ç”¨ nvmï¼ˆæ¨è–¦ï¼‰
nvm use 18
```

#### 2. å®‰è£ä¾è³´
```bash
cd frontend

# å®‰è£å¥—ä»¶
npm install

# æˆ–ä½¿ç”¨ yarn
yarn install
```

#### 3. ç’°å¢ƒè®Šæ•¸é…ç½®
```bash
# è¤‡è£½ç’°å¢ƒè®Šæ•¸æ¨¡æ¿
cp env.example .env.local

# ç·¨è¼¯å‰ç«¯ç’°å¢ƒè®Šæ•¸
code .env.local
```

#### 4. å•Ÿå‹•å‰ç«¯æœå‹™
```bash
# é–‹ç™¼æ¨¡å¼
npm run dev

# æˆ–ä½¿ç”¨ yarn
yarn dev
```

---

## ğŸ—„ï¸ è³‡æ–™åº«è¨­ç½®

### é¸é … A: Docker PostgreSQLï¼ˆæ¨è–¦æ–°æ‰‹ï¼‰

#### 1. å•Ÿå‹• PostgreSQL å®¹å™¨
```bash
# å‰µå»º PostgreSQL å®¹å™¨
docker run --name linebot-postgres \
  -e POSTGRES_DB=LineBot_01 \
  -e POSTGRES_USER=11131230 \
  -e POSTGRES_PASSWORD=11131230 \
  -p 5432:5432 \
  -d postgres:15

# é©—è­‰å®¹å™¨é‹è¡Œ
docker ps
```

#### 2. æ¸¬è©¦è³‡æ–™åº«é€£ç·š
```bash
# é€£æ¥åˆ°è³‡æ–™åº«
docker exec -it linebot-postgres psql -U 11131230 -d LineBot_01

# åœ¨ psql ä¸­åŸ·è¡Œ
\l  # åˆ—å‡ºè³‡æ–™åº«
\q  # é€€å‡º
```

### é¸é … B: æœ¬åœ° PostgreSQL å®‰è£

#### 1. å®‰è£ PostgreSQL
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install postgresql postgresql-contrib

# macOS (ä½¿ç”¨ Homebrew)
brew install postgresql
brew services start postgresql

# Windows
# ä¸‹è¼‰ä¸¦å®‰è£ï¼šhttps://www.postgresql.org/download/windows/
```

#### 2. å‰µå»ºè³‡æ–™åº«å’Œç”¨æˆ¶
```sql
-- ä»¥ postgres ç”¨æˆ¶èº«ä»½ç™»å…¥
sudo -u postgres psql

-- å‰µå»ºç”¨æˆ¶
CREATE USER "11131230" WITH PASSWORD '11131230';

-- å‰µå»ºè³‡æ–™åº«
CREATE DATABASE "LineBot_01" OWNER "11131230";

-- æˆäºˆæ¬Šé™
GRANT ALL PRIVILEGES ON DATABASE "LineBot_01" TO "11131230";

-- é€€å‡º
\q
```

### 3. è³‡æ–™åº«åˆå§‹åŒ–
```bash
# è¿”å›å¾Œç«¯ç›®éŒ„
cd Backend-v1

# å•Ÿå‹•å¾Œç«¯æœå‹™ï¼ˆæœƒè‡ªå‹•å‰µå»ºè¡¨æ ¼ï¼‰
python start.py
```

---

## âš™ï¸ ç’°å¢ƒè®Šæ•¸é…ç½®

### å¾Œç«¯ç’°å¢ƒè®Šæ•¸ (.env)

```bash
# è³‡æ–™åº«é…ç½®
DB_HOST=localhost
DB_PORT=5432
DB_NAME=LineBot_01
DB_USER=11131230
DB_PASSWORD=11131230

# JWT è¨­å®š
JWT_SECRET=your-very-secure-secret-key-here
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=30

# LINE ç™»å…¥é…ç½®ï¼ˆå¯é¸ï¼‰
LINE_CHANNEL_ID=your-line-channel-id
LINE_CHANNEL_SECRET=your-line-channel-secret
LINE_REDIRECT_URI=http://localhost:8000/api/v1/auth/line/callback

# Flask å¯†é‘°
FLASK_SECRET_KEY=your-flask-secret-key

# å‰ç«¯ URL
FRONTEND_URL=http://localhost:5173

# éƒµä»¶è¨­å®šï¼ˆå¯é¸ï¼‰
MAIL_SERVER=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD=your-app-password

# æ‡‰ç”¨é…ç½®
DEBUG=True
ENVIRONMENT=development
```

### å‰ç«¯ç’°å¢ƒè®Šæ•¸ (.env.local)

```bash
# çµ±ä¸€å¾Œç«¯ API URL
VITE_UNIFIED_API_URL=http://localhost:8000
```

### ğŸ” å®‰å…¨è¨­ç½®å»ºè­°

1. **JWT Secret**: ä½¿ç”¨å¼·å¯†ç¢¼ç”Ÿæˆå™¨å‰µå»º
```bash
# ç”Ÿæˆå®‰å…¨çš„ JWT secret
python -c "import secrets; print(secrets.token_urlsafe(32))"
```

2. **è³‡æ–™åº«å¯†ç¢¼**: ç”Ÿç”¢ç’°å¢ƒè«‹ä½¿ç”¨å¼·å¯†ç¢¼
3. **éƒµä»¶è¨­å®š**: ä½¿ç”¨æ‡‰ç”¨å°ˆç”¨å¯†ç¢¼ï¼Œä¸è¦ä½¿ç”¨ä¸»å¯†ç¢¼

---

## ğŸ§ª é©—è­‰èˆ‡æ¸¬è©¦

### å¥åº·æª¢æŸ¥

#### 1. å¾Œç«¯å¥åº·æª¢æŸ¥
```bash
# æª¢æŸ¥å¾Œç«¯æœå‹™
curl http://localhost:8000/health

# æª¢æŸ¥ API æ–‡æª”
curl http://localhost:8000/docs
```

#### 2. å‰ç«¯å¥åº·æª¢æŸ¥
```bash
# è¨ªå•å‰ç«¯é é¢
curl http://localhost:5173
```

#### 3. è³‡æ–™åº«é€£ç·šæ¸¬è©¦
```bash
# åœ¨å¾Œç«¯ç›®éŒ„ä¸­åŸ·è¡Œ
python -c "
from app.database import engine
from sqlalchemy import text
with engine.connect() as conn:
    result = conn.execute(text('SELECT 1'))
    print('è³‡æ–™åº«é€£ç·šæˆåŠŸï¼')
"
```

### åŠŸèƒ½æ¸¬è©¦æ¸…å–®

- [ ] **ç”¨æˆ¶è¨»å†Š**: POST `/api/v1/auth/register`
- [ ] **ç”¨æˆ¶ç™»å…¥**: POST `/api/v1/auth/login`
- [ ] **ç”¨æˆ¶è³‡æ–™**: GET `/api/v1/users/me`
- [ ] **Bot ç®¡ç†**: GET/POST `/api/v1/bots/`
- [ ] **å‰ç«¯é é¢**: å„å€‹è·¯ç”±æ­£å¸¸è¼‰å…¥

### API æ¸¬è©¦ç¯„ä¾‹

```bash
# è¨»å†Šç”¨æˆ¶
curl -X POST http://localhost:8000/api/v1/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "password": "password123",
    "username": "testuser"
  }'

# ç™»å…¥ç”¨æˆ¶
curl -X POST http://localhost:8000/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "password": "password123"
  }'
```

---

## ğŸ”§ é€²éšé…ç½®

### VS Code è¨­å®š

#### 1. æ¨è–¦æ“´å……åŠŸèƒ½
å‰µå»º `.vscode/extensions.json`:
```json
{
  "recommendations": [
    "ms-python.python",
    "ms-python.flake8",
    "ms-python.black-formatter",
    "bradlc.vscode-tailwindcss",
    "esbenp.prettier-vscode",
    "ms-vscode.vscode-typescript-next"
  ]
}
```

#### 2. å·¥ä½œå€è¨­å®š
å‰µå»º `.vscode/settings.json`:
```json
{
  "python.defaultInterpreterPath": "./Backend-v1/venv/bin/python",
  "python.formatting.provider": "black",
  "editor.formatOnSave": true,
  "typescript.preferences.importModuleSpecifier": "relative"
}
```

### é™¤éŒ¯é…ç½®

#### 1. å¾Œç«¯é™¤éŒ¯
å‰µå»º `.vscode/launch.json`:
```json
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Python: FastAPI",
      "type": "python",
      "request": "launch",
      "program": "${workspaceFolder}/Backend-v1/start.py",
      "console": "integratedTerminal",
      "cwd": "${workspaceFolder}/Backend-v1"
    }
  ]
}
```

#### 2. å‰ç«¯é™¤éŒ¯
åœ¨ç€è¦½å™¨ä¸­ä½¿ç”¨é–‹ç™¼è€…å·¥å…·ï¼Œæˆ–å®‰è£ React Developer Toolsã€‚

### æ€§èƒ½å„ªåŒ–

#### 1. å¾Œç«¯å„ªåŒ–
```python
# åœ¨ app/main.py ä¸­æ·»åŠ 
from fastapi.middleware.gzip import GZipMiddleware

app.add_middleware(GZipMiddleware, minimum_size=1000)
```

#### 2. å‰ç«¯å„ªåŒ–
```javascript
// åœ¨ vite.config.ts ä¸­æ·»åŠ 
export default defineConfig({
  build: {
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ['react', 'react-dom'],
          ui: ['@radix-ui/react-dialog', '@radix-ui/react-button']
        }
      }
    }
  }
})
```

---

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

#### 1. å¾Œç«¯å•é¡Œ

**å•é¡Œ**: `ModuleNotFoundError: No module named 'app'`
```bash
# è§£æ±ºæ–¹æ¡ˆ
cd Backend-v1
export PYTHONPATH=$PYTHONPATH:$(pwd)  # Linux/Mac
set PYTHONPATH=%PYTHONPATH%;%cd%      # Windows
```

**å•é¡Œ**: è³‡æ–™åº«é€£ç·šå¤±æ•—
```bash
# æª¢æŸ¥ PostgreSQL ç‹€æ…‹
docker ps  # å¦‚æœä½¿ç”¨ Docker
sudo systemctl status postgresql  # Linux æœ¬åœ°å®‰è£
brew services list | grep postgres  # macOS
```

**å•é¡Œ**: ç«¯å£ 8000 è¢«å ç”¨
```bash
# æ‰¾å‡ºå ç”¨é€²ç¨‹
lsof -i :8000  # Linux/Mac
netstat -ano | findstr :8000  # Windows

# çµ‚æ­¢é€²ç¨‹
kill -9 <PID>  # Linux/Mac
taskkill /PID <PID> /F  # Windows
```

#### 2. å‰ç«¯å•é¡Œ

**å•é¡Œ**: `npm install` å¤±æ•—
```bash
# æ¸…é™¤å¿«å–
npm cache clean --force
rm -rf node_modules package-lock.json
npm install
```

**å•é¡Œ**: CORS éŒ¯èª¤
```bash
# æª¢æŸ¥å¾Œç«¯ CORS è¨­å®š
# ç¢ºä¿ .env ä¸­çš„ FRONTEND_URL æ­£ç¢º
FRONTEND_URL=http://localhost:5173
```

**å•é¡Œ**: ç’°å¢ƒè®Šæ•¸æœªè¼‰å…¥
```bash
# ç¢ºèªæª”æ¡ˆåç¨±
ls -la .env*
# æ‡‰è©²çœ‹åˆ° .env.local æˆ– .env
```

#### 3. è³‡æ–™åº«å•é¡Œ

**å•é¡Œ**: PostgreSQL é€£ç·šè¢«æ‹’çµ•
```bash
# æª¢æŸ¥ PostgreSQL ç‹€æ…‹
docker logs linebot-postgres  # Docker
sudo tail -f /var/log/postgresql/postgresql-*.log  # Linux

# æª¢æŸ¥é€£ç·šè¨­å®š
psql -h localhost -U 11131230 -d LineBot_01
```

### æ—¥èªŒåˆ†æ

#### 1. å¾Œç«¯æ—¥èªŒ
```bash
# æŸ¥çœ‹å³æ™‚æ—¥èªŒ
tail -f logs/app.log

# ä½¿ç”¨ Python è¨˜éŒ„æ—¥èªŒ
import logging
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)
```

#### 2. å‰ç«¯æ—¥èªŒ
- ä½¿ç”¨ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·
- æª¢æŸ¥ Console å’Œ Network æ¨™ç±¤
- æŸ¥çœ‹ Vite é–‹ç™¼ä¼ºæœå™¨è¼¸å‡º

### éŒ¯èª¤ä»£ç¢¼å°ç…§è¡¨

| éŒ¯èª¤ä»£ç¢¼ | æ„ç¾© | è§£æ±ºæ–¹æ¡ˆ |
|----------|------|----------|
| 400 | è«‹æ±‚æ ¼å¼éŒ¯èª¤ | æª¢æŸ¥ API è«‹æ±‚æ ¼å¼ |
| 401 | æœªæˆæ¬Š | æª¢æŸ¥ JWT token |
| 403 | æ¬Šé™ä¸è¶³ | æª¢æŸ¥ç”¨æˆ¶æ¬Šé™ |
| 404 | è³‡æºä¸å­˜åœ¨ | æª¢æŸ¥ API ç«¯é» |
| 500 | ä¼ºæœå™¨éŒ¯èª¤ | æª¢æŸ¥å¾Œç«¯æ—¥èªŒ |

---

## ğŸ“ æ”¯æ´èˆ‡å”åŠ©

### ç²å–å¹«åŠ©

1. **æŸ¥çœ‹æ–‡æª”**:
   - API æ–‡æª”: `http://localhost:8000/docs`
   - å‰ç«¯é…ç½®: [`Doc/å‰ç«¯é…ç½®èª¿æ•´èªªæ˜.md`](Doc/å‰ç«¯é…ç½®èª¿æ•´èªªæ˜.md)

2. **æª¢æŸ¥æ—¥èªŒ**:
   - å¾Œç«¯æ—¥èªŒ: çµ‚ç«¯æ©Ÿè¼¸å‡º
   - å‰ç«¯æ—¥èªŒ: ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·

3. **ç¤¾ç¾¤è³‡æº**:
   - GitHub Issues
   - é–‹ç™¼è€…æ–‡æª”
   - Stack Overflow

### è²¢ç»æŒ‡å—

1. Fork å°ˆæ¡ˆ
2. å‰µå»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤è®Šæ›´
4. ç™¼èµ· Pull Request

---

## ğŸ“‹ é™„éŒ„

### ä¸€éµå•Ÿå‹•è…³æœ¬

#### Linux/Mac (`setup.sh`)
```bash
#!/bin/bash
echo "ğŸš€ é–‹å§‹è¨­ç½® LineBot-Web é–‹ç™¼ç’°å¢ƒ..."

# å¾Œç«¯è¨­ç½®
cd Backend-v1
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
cp env.example .env
echo "âœ… å¾Œç«¯è¨­ç½®å®Œæˆ"

# å‰ç«¯è¨­ç½®
cd ../frontend
npm install
cp env.example .env.local
echo "âœ… å‰ç«¯è¨­ç½®å®Œæˆ"

echo "ğŸ‰ è¨­ç½®å®Œæˆï¼"
echo "å•Ÿå‹•å¾Œç«¯: cd Backend-v1 && python start.py"
echo "å•Ÿå‹•å‰ç«¯: cd frontend && npm run dev"
```

#### Windows (`setup.bat`)
```batch
@echo off
echo ğŸš€ é–‹å§‹è¨­ç½® LineBot-Web é–‹ç™¼ç’°å¢ƒ...

REM å¾Œç«¯è¨­ç½®
cd Backend-v1
python -m venv venv
call venv\Scripts\activate
pip install -r requirements.txt
copy env.example .env
echo âœ… å¾Œç«¯è¨­ç½®å®Œæˆ

REM å‰ç«¯è¨­ç½®
cd ..\frontend
npm install
copy env.example .env.local
echo âœ… å‰ç«¯è¨­ç½®å®Œæˆ

echo ğŸ‰ è¨­ç½®å®Œæˆï¼
echo å•Ÿå‹•å¾Œç«¯: cd Backend-v1 ^&^& python start.py
echo å•Ÿå‹•å‰ç«¯: cd frontend ^&^& npm run dev
pause
```

---

**ğŸ¯ å¿«é€Ÿé€£çµ**
- å¾Œç«¯ API: http://localhost:8000
- API æ–‡æª”: http://localhost:8000/docs
- å‰ç«¯æ‡‰ç”¨: http://localhost:5173

**ğŸ“ ç‰ˆæœ¬è³‡è¨Š**
- å¾Œç«¯: FastAPI + Python 3.11
- å‰ç«¯: React + TypeScript + Vite
- è³‡æ–™åº«: PostgreSQL 15
- æœ€å¾Œæ›´æ–°: 2024/12/20